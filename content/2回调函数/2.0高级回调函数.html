

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>高级回调函数 &#8212; Dash 中文文档</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/2回调函数/2.0高级回调函数';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Clientside Callbacks" href="2.1%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%9E%E8%B0%83.html" />
    <link rel="prev" title="回调函数共享数据" href="../1%E5%9F%BA%E7%A1%80/2.3%E5%9B%9E%E8%B0%83%E4%B9%8B%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo3.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/logo3.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Dash 中文文档
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">p1 快速入门</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/0.%E5%AE%89%E8%A3%85.html">Dash 安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/1minimal-app.html">Dash App 案例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/2tutorial.html">Dash 速览</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">p2 基础</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../1%E5%9F%BA%E7%A1%80/1.0%E5%B8%83%E5%B1%80.html">布局</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1%E5%9F%BA%E7%A1%80/2.1%E5%9F%BA%E7%A1%80%E5%9B%9E%E8%B0%83.html">基础回调</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1%E5%9F%BA%E7%A1%80/2.2%E4%BA%A4%E4%BA%92%E7%BB%98%E5%9B%BE%E4%B8%8E%E8%BF%87%E6%BB%A4.html">交互可视化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1%E5%9F%BA%E7%A1%80/2.3%E5%9B%9E%E8%B0%83%E4%B9%8B%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE.html">回调函数共享数据</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">p3 回调函数</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#"> 高级回调函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="2.1%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%9E%E8%B0%83.html"> Clientside Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="2.2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E7%9A%84%E5%9B%9E%E8%B0%83.html"> Pattern-Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="2.3%E9%83%A8%E5%88%86%E5%B1%9E%E6%80%A7%E6%9B%B4%E6%96%B0.html"> Partial Property Updates</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fcontent/2回调函数/2.0高级回调函数.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/2回调函数/2.0高级回调函数.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1> 高级回调函数</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#catching-errors-with-preventupdate">Catching Errors with <code class="docutils literal notranslate"><span class="pre">PreventUpdate</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-no-update">使用<code class="docutils literal notranslate"><span class="pre">dash.no_update</span></code>显示错误</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#determining-which-input-has-fired-with-dash-callback-context">Determining which <code class="docutils literal notranslate"><span class="pre">Input</span></code> Has Fired with <code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#callback-context"><code class="docutils literal notranslate"><span class="pre">callback_context</span></code>属性</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">遗留行为:使用时间戳</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">用记忆提高表现</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">回调何时执行</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dash">当Dash应用首次加载时</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">作为用户交互的直接结果</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">作为用户交互的间接结果</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">当Dash组件被添加到布局中时</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">防止在初始组件渲染时执行回调</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">循环回调</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#synchronizing-a-slider-with-a-text-input-example">Synchronizing a Slider with a Text Input Example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">显示两个不同单位的输入示例</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">同步两个检查表</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1><img alt="" src="assets/images/language_icons/python_50px.svg" /> 高级回调函数<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h1>
<blockquote>
<div><p>为了充分利用本页内容，请确保您已经阅读了Dash Fundamentals中的[Basic callback](/ Basic -callback)</p>
</div></blockquote>
<section id="catching-errors-with-preventupdate">
<h2>Catching Errors with <code class="docutils literal notranslate"><span class="pre">PreventUpdate</span></code><a class="headerlink" href="#catching-errors-with-preventupdate" title="Permalink to this heading">#</a></h2>
<p>在某些情况下，您不希望更新回调输出。你可以通过在回调函数中引发’ PreventUpdate ‘异常来实现这一点</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span>
<span class="kn">from</span> <span class="nn">dash.exceptions</span> <span class="kn">import</span> <span class="n">PreventUpdate</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://codepen.io/chriddyp/pen/bWLwgP.css&#39;</span><span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s1">&#39;Click here to see the content&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;show-secret&#39;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;body-div&#39;</span><span class="p">)</span>
<span class="p">])</span>

<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;body-div&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;show-secret&#39;</span><span class="p">,</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_output</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n_clicks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PreventUpdate</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Elephants are the only animal that can&#39;t jump&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Click here to see the content</p>
</section>
<section id="dash-no-update">
<h2>使用<code class="docutils literal notranslate"><span class="pre">dash.no_update</span></code>显示错误<a class="headerlink" href="#dash-no-update" title="Permalink to this heading">#</a></h2>
<p>这个示例演示了如何在保持先前输入的同时显示错误，使用<code class="docutils literal notranslate"><span class="pre">dash.no_update</span></code>只更新部分回调输出</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">no_update</span>
<span class="kn">from</span> <span class="nn">dash.exceptions</span> <span class="kn">import</span> <span class="n">PreventUpdate</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://codepen.io/chriddyp/pen/bWLwgP.css&#39;</span><span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="s1">&#39;Enter a composite number to see its prime factors&#39;</span><span class="p">),</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="n">debounce</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;err&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">}),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">)</span>
<span class="p">])</span>

<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;out&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;err&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">show_factors</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">num</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># PreventUpdate prevents ALL outputs updating</span>
        <span class="k">raise</span> <span class="n">PreventUpdate</span>

    <span class="n">factors</span> <span class="o">=</span> <span class="n">prime_factors</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">factors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># dash.no_update prevents any single output updating</span>
        <span class="c1"># (note: it&#39;s OK to use for a single-output callback too)</span>
        <span class="k">return</span> <span class="n">no_update</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is prime!&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>

    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s1">&#39; * &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">factors</span><span class="p">)),</span> <span class="s1">&#39;&#39;</span>

<span class="k">def</span> <span class="nf">prime_factors</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="n">n</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">out</span> <span class="o">=</span> <span class="n">num</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">2</span>
    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Enter a composite number to see its prime factors</p>
</section>
<section id="determining-which-input-has-fired-with-dash-callback-context">
<h2>Determining which <code class="docutils literal notranslate"><span class="pre">Input</span></code> Has Fired with <code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code><a class="headerlink" href="#determining-which-input-has-fired-with-dash-callback-context" title="Permalink to this heading">#</a></h2>
<p>除了像<code class="docutils literal notranslate"><span class="pre">n_clicks</span></code>这样的事件属性会在事件发生时改变(在这里是点击)，还有一个全局变量<code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code>，只在回调中可用。使用<code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code>，您可以确定哪个组件/属性对触发了回调</p>
<p>下面是<code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code>的属性总结。概述了何时使用它们的基本知识。有关更多细节和示例，请参阅<span class="xref myst">Which Callback Input Changed</span></p>
<p>更多关于是用<code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code>的案例，请查阅<a class="reference external" href="https://dash-example-index.herokuapp.com/?code=ctx">Example Index</a>.</p>
<section id="callback-context">
<h3><code class="docutils literal notranslate"><span class="pre">callback_context</span></code>属性<a class="headerlink" href="#callback-context" title="Permalink to this heading">#</a></h3>
<blockquote>
<div><p>在Dash 2.4及以后的版本中，<code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code> (or <code class="docutils literal notranslate"><span class="pre">dash.ctx</span></code>)有三个额外的属性，使其更容易使用</p>
</div></blockquote>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">triggered_id</span></code>: 触发回调的组件的<code class="docutils literal notranslate"><span class="pre">id</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">triggered_prop_ids</span></code>: 一个包含触发回调的组件id和道具的字典。当多个输入可以同时触发回调，或者同一组件的多个属性可以触发回调时非常有用</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">args_grouping</span></code>: 与灵活的回调签名一起使用的输入字典。键是变量名，值是包含的字典:</p>
<ul>
<li><p>“id”: 组件ID。如果它是一个模式匹配ID，它将是一个字典</p></li>
<li><p>“id_str”: 对于模式匹配ID，它是没有空格的字符串化的字典ID</p></li>
<li><p>“property”: 回调中使用的组件属性</p></li>
<li><p>“value”: 在触发回调时组件属性的值</p></li>
<li><p>“triggered”: 一个布尔值，指示此输入是否触发回调</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><p>Dash 2.4和更早版本的Dash具有以下属性</p>
</div></blockquote>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">triggered</span></code>: 所有改变并导致回调执行的Input道具列表。在初始加载时调用回调时，它是空的，除非’ Input ‘ prop从另一个初始回调中获得其值。由用户操作触发的回调通常在’触发’中有一个项目，除非同一个操作一次改变两个道具，或者回调有几个’输入’道具，这些道具都被基于单个用户操作的另一个回调修改</p></li>
</ul>
<blockquote>
<div><p><strong>More about empty<code class="docutils literal notranslate"><span class="pre">triggered</span></code> lists</strong>: For backward compatibility purposes,
an empty <code class="docutils literal notranslate"><span class="pre">triggered</span></code> is not really empty. It’s falsy so that you can use <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">triggered</span></code> to detect the initial call, but it still has a placeholder
element so that <code class="docutils literal notranslate"><span class="pre">ctx.triggered[0][&quot;prop_id&quot;].split(&quot;.&quot;)</span></code> yields a blank ID
and prop <code class="docutils literal notranslate"><span class="pre">[&quot;&quot;,</span> <span class="pre">&quot;&quot;]</span></code> instead of an error.</p>
</div></blockquote>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">inputs</span></code> and <code class="docutils literal notranslate"><span class="pre">states</span></code>: 允许您通过ID和prop来访问回调参数，而不是通过函数参数。它们有字典的形式 <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">'component_id.prop_name':</span> <span class="pre">value</span> <span class="pre">}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outputs_list</span></code>, <code class="docutils literal notranslate"><span class="pre">inputs_list</span></code>, and <code class="docutils literal notranslate"><span class="pre">states_list</span></code>: 输入、输出和状态项的列表，按照回调参数和返回值的顺序排列。这主要用于 <span class="xref myst">pattern-matching callbacks</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">response</span></code>: 正在构造的HTTP响应对象，用于更改cookie</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">record_timing</span></code>: 一种报告粒度计时信息的方法，可以在[Dev Tools](/devtools . exe)中看到</p></li>
</ul>
<p>这里有一个如何做到这一点的例子</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">ctx</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s1">&#39;Button 1&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;btn-1&#39;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s1">&#39;Button 2&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;btn-2&#39;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s1">&#39;Button 3&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;btn-3&#39;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;container&#39;</span><span class="p">)</span>
<span class="p">])</span>


<span class="nd">@callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;container&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
              <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;btn-1&#39;</span><span class="p">,</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
              <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;btn-2&#39;</span><span class="p">,</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
              <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;btn-3&#39;</span><span class="p">,</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="n">btn2</span><span class="p">,</span> <span class="n">btn3</span><span class="p">):</span>
    <span class="n">button_id</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered_id</span> <span class="k">if</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;No clicks yet&#39;</span>

    <span class="n">ctx_msg</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
        <span class="s1">&#39;states&#39;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">states</span><span class="p">,</span>
        <span class="s1">&#39;triggered&#39;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">,</span>
        <span class="s1">&#39;inputs&#39;</span><span class="p">:</span> <span class="n">ctx</span><span class="o">.</span><span class="n">inputs</span>
    <span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Table</span><span class="p">([</span>
            <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span><span class="n">html</span><span class="o">.</span><span class="n">Th</span><span class="p">(</span><span class="s1">&#39;Button 1&#39;</span><span class="p">),</span>
                     <span class="n">html</span><span class="o">.</span><span class="n">Th</span><span class="p">(</span><span class="s1">&#39;Button 2&#39;</span><span class="p">),</span>
                     <span class="n">html</span><span class="o">.</span><span class="n">Th</span><span class="p">(</span><span class="s1">&#39;Button 3&#39;</span><span class="p">),</span>
                     <span class="n">html</span><span class="o">.</span><span class="n">Th</span><span class="p">(</span><span class="s1">&#39;Most Recent Click&#39;</span><span class="p">)]),</span>
            <span class="n">html</span><span class="o">.</span><span class="n">Tr</span><span class="p">([</span><span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="n">btn1</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">),</span>
                     <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="n">btn2</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">),</span>
                     <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="n">btn3</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">),</span>
                     <span class="n">html</span><span class="o">.</span><span class="n">Td</span><span class="p">(</span><span class="n">button_id</span><span class="p">)])</span>
        <span class="p">]),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Pre</span><span class="p">(</span><span class="n">ctx_msg</span><span class="p">)</span>
    <span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Button 1Button 2Button 3</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Button 1</p></th>
<th class="head"><p>Button 2</p></th>
<th class="head"><p>Button 3</p></th>
<th class="head"><p>Most Recent Click</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
  &quot;states&quot;: {},
  &quot;triggered&quot;: [],
  &quot;inputs&quot;: {
    &quot;btn-1.n_clicks&quot;: null,
    &quot;btn-2.n_clicks&quot;: null,
    &quot;btn-3.n_clicks&quot;: null
  }
}
</pre></div>
</div>
</section>
<section id="id2">
<h3>遗留行为:使用时间戳<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
<p>在<code class="docutils literal notranslate"><span class="pre">dash</span> <span class="pre">v1.0</span></code>之前，您需要比较时间戳属性，如<code class="docutils literal notranslate"><span class="pre">n_clicks_timestamp</span></code>来查找最近的点击。虽然<code class="docutils literal notranslate"><span class="pre">*_timestamp</span></code> 的现有用法目前仍然有效，但这种方法已被弃用，可能会在将来的更新中删除。唯一的例外是来自<code class="docutils literal notranslate"><span class="pre">dcc.Store</span></code>的<code class="docutils literal notranslate"><span class="pre">modified_timestamp</span></code>，它可以安全使用并且不被弃用</p>
</section>
</section>
<section id="id3">
<h2>用记忆提高表现<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<p>记忆允许您通过存储函数调用的结果来绕过长时间的计算</p>
<p>为了更好地理解记忆是如何工作的，让我们从一个简单的例子开始</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">functools32</span>

<span class="nd">@functools32</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">slow_function</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Input was </span><span class="si">{</span><span class="nb">input</span><span class="si">}</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>第一次调用’ slow function(‘test’) ‘将花费10秒。使用相同的参数第二次调用它几乎不会花费任何时间，因为之前计算的结果保存在内存中并被重用</p>
<p>Dash文档的[Performance](/ Performance)部分更深入地研究了如何利用多进程和线程结合记忆来进一步提高性能</p>
<p><strong>Sign up for Dash Club</strong> → Two free cheat sheets plus updates from Chris
Parmer and Adam Schroeder delivered to your inbox every two months. Includes
tips and tricks, community apps, and deep dives into the Dash architecture.
<em>[Join now](<a class="reference external" href="https://go.plotly.com/dash-">https://go.plotly.com/dash-</a>
club?utm_medium=dash_docs&amp;utm_content=advanced-callbacks)</em>.</p>
</section>
<section id="id4">
<h2>回调何时执行<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h2>
<p>本节描述了<code class="docutils literal notranslate"><span class="pre">dash-renderer</span></code>前端客户端可以向Dash后端服务器(或客户端回调代码)发出请求以执行回调函数的情况</p>
<section id="dash">
<h3>当Dash应用首次加载时<a class="headerlink" href="#dash" title="Permalink to this heading">#</a></h3>
<p>Dash应用程序中的所有回调都是在应用程序首次加载时使用其输入的初始值执行的。这被称为回调的“初始调用”。要了解如何抑制此行为，请参阅Dash回调的’ prevent initial call ‘属性的文档</p>
<p>值得注意的是，当Dash应用程序最初由“Dash -renderer”前端客户端加载到web浏览器中时，它的整个回调链都是递归自检的</p>
<p>这允许’ dash-renderer ‘预测回调需要执行的顺序，因为当回调的输入是尚未触发的其他回调的输出时，回调会被阻塞。为了解除这些回调的执行阻塞，必须执行输入立即可用的第一个回调。这个过程可以帮助“dash-renderer”最小化它所使用的时间和精力，并避免不必要的重新绘制页面，通过确保它只在所有回调的输入都达到最终值时才请求执行回调</p>
<p>Examine the following Dash app:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">()</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;execute callback&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;button_1&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;first_output_1&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;second_output_1&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>


<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;first_output_1&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;second_output_1&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;button_1&quot;</span><span class="p">,</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">change_text</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;n_clicks is &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">),</span> <span class="s2">&quot;n_clicks is &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">)]</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>execute callback</p>
<p>n_clicks is None</p>
<p>n_clicks is None</p>
<p>请注意，当这个应用程序被web浏览器加载完成并准备好与用户交互时，’ html。Div的组件不会像应用布局中声明的那样说”callback not executed”，而是”n clicks is None”，作为’ change text() ‘回调被执行的结果。这是因为回调的“初始调用”发生时，“n次点击”的值为“None”</p>
</section>
<section id="id5">
<h3>作为用户交互的直接结果<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h3>
<p>大多数情况下，回调是作为用户交互的直接结果执行的，例如单击按钮或在下拉菜单中选择项。当这种交互发生时，Dash组件将它们的新值传递给“Dash -renderer”前端客户端，然后该客户端请求Dash服务器执行任何以新更改的值作为输入的回调函数</p>
<p>如果Dash应用程序有多个回调，“Dash -renderer”会根据是否可以立即执行新更改的输入来请求执行回调。如果多个输入同时更改，则发出请求来执行所有输入</p>
<p>这些请求是以同步还是异步的方式执行，取决于Dash后端服务器的具体设置。如果它在多线程环境中运行，那么所有回调都可以同时执行，并且它们将根据执行速度返回值。然而，在单线程环境中，回调将按照服务器接收回调的顺序一次执行一个回调</p>
<p>在上面的示例应用程序中，单击该按钮将执行回调</p>
</section>
<section id="id6">
<h3>作为用户交互的间接结果<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h3>
<p>当用户与组件交互时，结果回调的输出本身可能是其他回调的输入。’ dash-renderer ‘将阻止这样一个回调的执行，直到回调的输出是它的输入被执行</p>
<p>Take the following Dash app:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">()</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;execute fast callback&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;button_3&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;execute slow callback&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;button_4&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;first_output_3&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;second_output_3&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;third_output_3&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>


<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;first_output_3&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;button_3&quot;</span><span class="p">,</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">first_callback</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;in the fast callback it is &quot;</span> <span class="o">+</span> <span class="n">current_time</span>


<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;second_output_3&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span> <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;button_4&quot;</span><span class="p">,</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">second_callback</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;in the slow callback it is &quot;</span> <span class="o">+</span> <span class="n">current_time</span>


<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;third_output_3&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;first_output_3&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;second_output_3&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">third_callback</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;in the third callback it is &quot;</span> <span class="o">+</span> <span class="n">current_time</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>execute fast callbackexecute slow callback</p>
<p>in the fast callback it is 07:13:56</p>
<p>in the slow callback it is 07:14:01</p>
<p>in the third callback it is 07:14:01</p>
<p>上面的Dash应用程序演示了回调是如何串联在一起的。注意，如果你先点击“执行慢回调”，然后点击“执行快回调”，第三个回调直到慢回调完成执行后才会执行。这是因为第三个回调有第二个回调的输出作为输入，这让’ dash-renderer ‘知道它应该延迟执行，直到第二个回调完成</p>
</section>
<section id="id7">
<h3>当Dash组件被添加到布局中时<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h3>
<p>回调可以将新的Dash组件插入到Dash应用程序的布局中。如果这些新组件本身是其他回调函数的输入，那么它们在Dash应用程序布局中的出现将触发这些回调函数的执行</p>
<p>在这种情况下，可能会发出多个请求来执行同一个回调函数。如果所讨论的回调已经被请求，并且在将新组件(也是其输入)添加到布局之前返回其输出，则会发生这种情况</p>
</section>
</section>
<section id="id8">
<h2>防止在初始组件渲染时执行回调<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h2>
<p>您可以使用’ prevent initial call ‘属性来防止回调在其输入最初出现在Dash应用程序布局中时触发</p>
<p>当初始加载Dash应用程序的布局时，以及当触发回调时将新组件引入布局时，此属性也会应用</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">()</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;execute callbacks&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;button_2&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;first_output_2&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;second_output_2&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;third_output_2&quot;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;callback not executed&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;fourth_output_2&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>


<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;first_output_2&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;second_output_2&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;button_2&quot;</span><span class="p">,</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span> <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">first_callback</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;in the first callback it is &quot;</span> <span class="o">+</span> <span class="n">current_time</span><span class="p">,</span> <span class="s2">&quot;in the first callback it is &quot;</span> <span class="o">+</span> <span class="n">current_time</span><span class="p">]</span>


<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;third_output_2&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span> <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;second_output_2&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span> <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">second_callback</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;in the second callback it is &quot;</span> <span class="o">+</span> <span class="n">current_time</span>


<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;fourth_output_2&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;first_output_2&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;third_output_2&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">),</span> <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">third_output</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;in the third callback it is &quot;</span> <span class="o">+</span> <span class="n">current_time</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>execute callbacks</p>
<p>callback not executed</p>
<p>callback not executed</p>
<p>callback not executed</p>
<p>callback not executed</p>
<p>然而，上述行为只有在应用程序初始加载时，回调输出和输入都出现在应用程序布局中时才适用</p>
<p>It is important to note that <code class="docutils literal notranslate"><span class="pre">prevent_initial_call</span></code> will not prevent a
callback from firing in the case where the callback’s input is inserted into
the layout as the result of another callback after the app initially loads
<strong>unless the output is inserted alongside that input</strong>!</p>
<p>In other words, if the output of the callback is already present in the app
layout before its input is inserted into the layout, <code class="docutils literal notranslate"><span class="pre">prevent_initial_call</span></code>
will not prevent its execution when the input is first inserted into the
layout.</p>
<p>Consider the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">suppress_callback_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">server</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Location</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;url&#39;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;layout-div&#39;</span><span class="p">),</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;content&#39;</span><span class="p">)</span>
<span class="p">])</span>

<span class="nd">@callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span> <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;pathname&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">display_page</span><span class="p">(</span><span class="n">pathname</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;hello world&#39;</span><span class="p">),</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">)</span>
    <span class="p">])</span>

<span class="nd">@callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span> <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span> <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_output</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&gt;&gt;&gt; update_output&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>

<span class="nd">@callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;layout-div&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span> <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span> <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_layout_div</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&gt;&gt;&gt; update_layout_div&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>
</div>
<p>在这种情况下，’ prevent initial call ‘将阻止’ update output() ‘回调在其输入作为’ display page() ‘回调的结果首次插入到应用程序布局中时触发。这是因为当回调执行时，回调的输入和输出都已经包含在应用程序布局中</p>
<p>然而，因为应用布局只包含回调的输出，而不是它的输入，’ prevent initial call ‘不会阻止’ update layout div() ‘回调触发。由于这里指定了’ suppress callback exceptions=True ‘， Dash必须假设在应用程序初始化时输入存在于应用程序布局中。从本例中输出元素的角度来看，处理新输入组件的方式就好像为现有输入提供了一个新值，而不是像最初呈现的那样处理它</p>
</section>
<section id="id9">
<h2>循环回调<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h2>
<p>从’ dash v1.19.0 ‘开始，您可以在同一个回调中创建循环更新。不支持涉及多个回调的循环回调链。循环回调可用于保持多个输入彼此同步</p>
<section id="synchronizing-a-slider-with-a-text-input-example">
<h3>Synchronizing a Slider with a Text Input Example<a class="headerlink" href="#synchronizing-a-slider-with-a-text-input-example" title="Permalink to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">ctx</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://codepen.io/chriddyp/pen/bWLwgP.css&quot;</span><span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;slider-circular&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
            <span class="n">marks</span><span class="o">=</span><span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">21</span><span class="p">)},</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">3</span>
        <span class="p">),</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;input-circular&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">3</span>
        <span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;input-circular&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;slider-circular&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;input-circular&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;slider-circular&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">input_value</span><span class="p">,</span> <span class="n">slider_value</span><span class="p">):</span>
    <span class="n">trigger_id</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;prop_id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">input_value</span> <span class="k">if</span> <span class="n">trigger_id</span> <span class="o">==</span> <span class="s2">&quot;input-circular&quot;</span> <span class="k">else</span> <span class="n">slider_value</span>
    <span class="k">return</span> <span class="n">value</span><span class="p">,</span> <span class="n">value</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>01234567891011121314151617181920</p>
</section>
<section id="id10">
<h3>显示两个不同单位的输入示例<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">ctx</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://codepen.io/chriddyp/pen/bWLwgP.css&quot;</span><span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="s1">&#39;Convert Temperature&#39;</span><span class="p">),</span>
    <span class="s1">&#39;Celsius&#39;</span><span class="p">,</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;celsius&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;number&quot;</span>
    <span class="p">),</span>
    <span class="s1">&#39; = Fahrenheit&#39;</span><span class="p">,</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;fahrenheit&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="mf">32.0</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">])</span>

<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;celsius&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;fahrenheit&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;celsius&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;fahrenheit&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">sync_input</span><span class="p">(</span><span class="n">celsius</span><span class="p">,</span> <span class="n">fahrenheit</span><span class="p">):</span>
    <span class="n">input_id</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;prop_id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">input_id</span> <span class="o">==</span> <span class="s2">&quot;celsius&quot;</span><span class="p">:</span>
        <span class="n">fahrenheit</span><span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">celsius</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">celsius</span><span class="p">)</span> <span class="o">*</span> <span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">celsius</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">fahrenheit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">fahrenheit</span><span class="p">)</span> <span class="o">-</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="o">/</span><span class="mi">9</span>
    <span class="k">return</span> <span class="n">celsius</span><span class="p">,</span> <span class="n">fahrenheit</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Convert Temperature</p>
<p>Celsius = Fahrenheit</p>
</section>
<section id="id11">
<h3>同步两个检查表<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">Dash</span><span class="p">,</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">callback_context</span>

<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://codepen.io/chriddyp/pen/bWLwgP.css&quot;</span><span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>

<span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;New York City&quot;</span><span class="p">,</span> <span class="s2">&quot;Montréal&quot;</span><span class="p">,</span> <span class="s2">&quot;San Francisco&quot;</span><span class="p">]</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Checklist</span><span class="p">([</span><span class="s2">&quot;All&quot;</span><span class="p">],</span> <span class="p">[],</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;all-checklist&quot;</span><span class="p">,</span> <span class="n">inline</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Checklist</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;city-checklist&quot;</span><span class="p">,</span> <span class="n">inline</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="nd">@callback</span><span class="p">(</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;city-checklist&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;all-checklist&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;city-checklist&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
    <span class="n">Input</span><span class="p">(</span><span class="s2">&quot;all-checklist&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">sync_checklists</span><span class="p">(</span><span class="n">cities_selected</span><span class="p">,</span> <span class="n">all_selected</span><span class="p">):</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">callback_context</span>
    <span class="n">input_id</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;prop_id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">input_id</span> <span class="o">==</span> <span class="s2">&quot;city-checklist&quot;</span><span class="p">:</span>
        <span class="n">all_selected</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;All&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="n">cities_selected</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">options</span><span class="p">)</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cities_selected</span> <span class="o">=</span> <span class="n">options</span> <span class="k">if</span> <span class="n">all_selected</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="k">return</span> <span class="n">cities_selected</span><span class="p">,</span> <span class="n">all_selected</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>All</p>
<p>New York CityMontréalSan Francisco</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/2回调函数"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../1%E5%9F%BA%E7%A1%80/2.3%E5%9B%9E%E8%B0%83%E4%B9%8B%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">回调函数共享数据</p>
      </div>
    </a>
    <a class="right-next"
       href="2.1%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%9E%E8%B0%83.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"> Clientside Callbacks</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#catching-errors-with-preventupdate">Catching Errors with <code class="docutils literal notranslate"><span class="pre">PreventUpdate</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dash-no-update">使用<code class="docutils literal notranslate"><span class="pre">dash.no_update</span></code>显示错误</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#determining-which-input-has-fired-with-dash-callback-context">Determining which <code class="docutils literal notranslate"><span class="pre">Input</span></code> Has Fired with <code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#callback-context"><code class="docutils literal notranslate"><span class="pre">callback_context</span></code>属性</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">遗留行为:使用时间戳</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">用记忆提高表现</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">回调何时执行</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dash">当Dash应用首次加载时</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">作为用户交互的直接结果</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">作为用户交互的间接结果</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">当Dash组件被添加到布局中时</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">防止在初始组件渲染时执行回调</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">循环回调</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#synchronizing-a-slider-with-a-text-input-example">Synchronizing a Slider with a Text Input Example</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">显示两个不同单位的输入示例</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">同步两个检查表</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By hutalk Community
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>