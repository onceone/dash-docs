

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Pattern-Matching &#8212; Dash 中文文档</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/2回调函数/2.2模式匹配的回调';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Partial Property Updates" href="2.3%E9%83%A8%E5%88%86%E5%B1%9E%E6%80%A7%E6%9B%B4%E6%96%B0.html" />
    <link rel="prev" title="Clientside Callbacks" href="2.1%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%9E%E8%B0%83.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo3.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/logo3.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Dash 中文文档
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">p1 快速入门</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/0.%E5%AE%89%E8%A3%85.html">Dash 安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/1minimal-app.html">Dash App 案例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/2tutorial.html">Dash 速览</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">p2 基础</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../1%E5%9F%BA%E7%A1%80/1.0%E5%B8%83%E5%B1%80.html">布局</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1%E5%9F%BA%E7%A1%80/2.1%E5%9F%BA%E7%A1%80%E5%9B%9E%E8%B0%83.html">基础回调</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1%E5%9F%BA%E7%A1%80/2.2%E4%BA%A4%E4%BA%92%E7%BB%98%E5%9B%BE%E4%B8%8E%E8%BF%87%E6%BB%A4.html">交互可视化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1%E5%9F%BA%E7%A1%80/2.3%E5%9B%9E%E8%B0%83%E4%B9%8B%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE.html">回调函数共享数据</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">p3 回调函数</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="2.0%E9%AB%98%E7%BA%A7%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0.html"> 高级回调函数</a></li>
<li class="toctree-l1"><a class="reference internal" href="2.1%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%9E%E8%B0%83.html"> Clientside Callbacks</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"> Pattern-Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="2.3%E9%83%A8%E5%88%86%E5%B1%9E%E6%80%A7%E6%9B%B4%E6%96%B0.html"> Partial Property Updates</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fcontent/2回调函数/2.2模式匹配的回调.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/2回调函数/2.2模式匹配的回调.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1> Pattern-Matching</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-example-with-all">Simple Example with <code class="docutils literal notranslate"><span class="pre">ALL</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-example-with-match">Simple Example with <code class="docutils literal notranslate"><span class="pre">MATCH</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-example-with-allsmaller">Simple Example with <code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#todo-app">Todo App</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="pattern-matching">
<h1><img alt="" src="assets/images/language_icons/python_50px.svg" /> Pattern-Matching<a class="headerlink" href="#pattern-matching" title="Permalink to this heading">#</a></h1>
<p>Callbacks</p>
<blockquote>
<div><p>To get the most out of this page, make sure you’ve read about <span class="xref myst">Basic
Callbacks</span> in the Dash Fundamentals.</p>
</div></blockquote>
<p>The pattern-matching callback selectors <code class="docutils literal notranslate"><span class="pre">MATCH</span></code>, <code class="docutils literal notranslate"><span class="pre">ALL</span></code>, &amp; <code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code> allow
you to write callbacks that respond to or update an arbitrary or dynamic
number of components.</p>
<section id="simple-example-with-all">
<h2>Simple Example with <code class="docutils literal notranslate"><span class="pre">ALL</span></code><a class="headerlink" href="#simple-example-with-all" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>This example uses <span class="xref myst">partial property updates</span>,
introduced in Dash 2.9. For an example that works with earlier versions of
Dash, see Simple <code class="docutils literal notranslate"><span class="pre">ALL</span></code> Example Without Partial Updates at the end of this
example.</p>
</div></blockquote>
<p>This example renders an arbitrary number of <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> elements and the
callback is fired whenever any of the <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> elements change. Try
adding a few dropdowns and selecting their values to see how the app updates.</p>
<p>__</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> from dash import Dash, dcc, html, Input, Output, ALL, Patch, callback

app = Dash(__name__)

app.layout = html.Div(
    [
        html.Button(&quot;Add Filter&quot;, id=&quot;add-filter-btn&quot;, n_clicks=0),
        html.Div(id=&quot;dropdown-container-div&quot;, children=[]),
        html.Div(id=&quot;dropdown-container-output-div&quot;),
    ]
)


@callback(
    Output(&quot;dropdown-container-div&quot;, &quot;children&quot;), Input(&quot;add-filter-btn&quot;, &quot;n_clicks&quot;)
)
def display_dropdowns(n_clicks):
    patched_children = Patch()
    new_dropdown = dcc.Dropdown(
        [&quot;NYC&quot;, &quot;MTL&quot;, &quot;LA&quot;, &quot;TOKYO&quot;],
        id={&quot;type&quot;: &quot;city-filter-dropdown&quot;, &quot;index&quot;: n_clicks},
    )
    patched_children.append(new_dropdown)
    return patched_children


@callback(
    Output(&quot;dropdown-container-output-div&quot;, &quot;children&quot;),
    Input({&quot;type&quot;: &quot;city-filter-dropdown&quot;, &quot;index&quot;: ALL}, &quot;value&quot;),
)
def display_output(values):
    return html.Div(
        [html.Div(f&quot;Dropdown {i + 1} = {value}&quot;) for (i, value) in enumerate(values)]
    )


if __name__ == &quot;__main__&quot;:
    app.run(debug=True)
</pre></div>
</div>
<p>Add Filter</p>
<p>Select…</p>
<p>Dropdown 1 = None</p>
<p>Some notes about this example:</p>
<ul class="simple">
<li><p>Notice how the <code class="docutils literal notranslate"><span class="pre">id</span></code> in <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> is a <em>dictionary</em> rather than a <em>string</em>. This is a new feature that we enabled for pattern-matching callbacks (previously, IDs had to be strings).</p></li>
<li><p>In our second callback, we have <code class="docutils literal notranslate"><span class="pre">Input({'type':</span> <span class="pre">'city-filter-dropdown',</span> <span class="pre">'index':</span> <span class="pre">ALL},</span> <span class="pre">'value')</span></code>. This means “match any input that has an ID dictionary where <code class="docutils literal notranslate"><span class="pre">'type'</span></code> is <code class="docutils literal notranslate"><span class="pre">'city-filter-dropdown'</span></code> and <code class="docutils literal notranslate"><span class="pre">'index'</span></code> is <em>anything</em>. Whenever the <code class="docutils literal notranslate"><span class="pre">value</span></code> property of any of the dropdowns change, send <em>all</em> of their values to the callback.”</p></li>
<li><p>The keys &amp; values of the ID dictionary (<code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>, <code class="docutils literal notranslate"><span class="pre">city-filter-dropdown</span></code>) are arbitrary. This could’ve be named <code class="docutils literal notranslate"><span class="pre">{'foo':</span> <span class="pre">'bar',</span> <span class="pre">'baz':</span> <span class="pre">n_clicks}</span></code>.</p></li>
<li><p>However, for readability, we recommend using keys like <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>, or <code class="docutils literal notranslate"><span class="pre">id</span></code>. <code class="docutils literal notranslate"><span class="pre">type</span></code> can be used to refer to the class or set dynamic components and <code class="docutils literal notranslate"><span class="pre">index</span></code> or <code class="docutils literal notranslate"><span class="pre">id</span></code> could be used to refer <em>which</em> component you are matching within that set. In this example, we just have a single set of dynamic components but you may have multiple sets of dynamic components in more complex apps or if you are using <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> (see below).</p></li>
<li><p>In fact, in this example, we didn’t actually <em>need</em> <code class="docutils literal notranslate"><span class="pre">'type':</span> <span class="pre">'city-filter-dropdown'</span></code>. The same callback would have worked with <code class="docutils literal notranslate"><span class="pre">Input({'index':</span> <span class="pre">ALL},</span> <span class="pre">'value')</span></code>. We included <code class="docutils literal notranslate"><span class="pre">'type':</span> <span class="pre">'city-filter-dropdown'</span></code> as an extra specifier in case you create multiple sets of dynamic components.</p></li>
<li><p>The component properties themselves (e.g. <code class="docutils literal notranslate"><span class="pre">value</span></code>) cannot be matched by a pattern, only the IDs are dynamic.</p></li>
<li><p>This example uses <code class="docutils literal notranslate"><span class="pre">Patch</span></code> to make a <span class="xref myst">partial update</span> to the <code class="docutils literal notranslate"><span class="pre">'children'</span></code> property of <code class="docutils literal notranslate"><span class="pre">'dropdown-container-div'</span></code>. We append a dropdown each time the first callback runs.</p></li>
</ul>
<p>Simple <code class="docutils literal notranslate"><span class="pre">ALL</span></code> Example Without Partial Updates</p>
<p>This example is similar to the Simple Example with <code class="docutils literal notranslate"><span class="pre">ALL</span></code> above, but uses
<code class="docutils literal notranslate"><span class="pre">State</span></code> to access the list of currently displayed dropdowns. In the first
callback, we then append to this list of dropdowns and return it as the
output.</p>
<p>__</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> from dash import Dash, dcc, html, Input, Output, State, ALL, callback

app = Dash(__name__, suppress_callback_exceptions=True)

app.layout = html.Div([
    html.Button(&quot;Add Filter&quot;, id=&quot;add-filter&quot;, n_clicks=0),
    html.Div(id=&#39;dropdown-container&#39;, children=[]),
    html.Div(id=&#39;dropdown-container-output&#39;)
])

@callback(
    Output(&#39;dropdown-container&#39;, &#39;children&#39;),
    Input(&#39;add-filter&#39;, &#39;n_clicks&#39;),
    State(&#39;dropdown-container&#39;, &#39;children&#39;))
def display_dropdowns(n_clicks, children):
    new_dropdown = dcc.Dropdown(
        [&#39;NYC&#39;, &#39;MTL&#39;, &#39;LA&#39;, &#39;TOKYO&#39;],
        id={
            &#39;type&#39;: &#39;filter-dropdown&#39;,
            &#39;index&#39;: n_clicks
        }
    )
    children.append(new_dropdown)
    return children

@callback(
    Output(&#39;dropdown-container-output&#39;, &#39;children&#39;),
    Input({&#39;type&#39;: &#39;filter-dropdown&#39;, &#39;index&#39;: ALL}, &#39;value&#39;)
)
def display_output(values):
    return html.Div([
        html.Div(&#39;Dropdown {} = {}&#39;.format(i + 1, value))
        for (i, value) in enumerate(values)
    ])


if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</pre></div>
</div>
</section>
<section id="simple-example-with-match">
<h2>Simple Example with <code class="docutils literal notranslate"><span class="pre">MATCH</span></code><a class="headerlink" href="#simple-example-with-match" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>This example uses <span class="xref myst">partial property updates</span>,
introduced in Dash 2.9. For an example that works with earlier versions of
Dash, see Simple <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> Example Without Partial Updates at the end of this
example.</p>
</div></blockquote>
<p>Like <code class="docutils literal notranslate"><span class="pre">ALL</span></code>, <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> will fire the callback when any of the component’s
properties change. However, instead of passing <em>all</em> of the values into the
callback, <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> will pass just a single value into the callback. Instead of
updating a single output, it will update the dynamic output that is “matched”
with.</p>
<p>__</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> from dash import Dash, dcc, html, Input, Output, State, MATCH, Patch, callback

app = Dash(__name__)

app.layout = html.Div([
    html.Button(&quot;Add Filter&quot;, id=&quot;dynamic-add-filter-btn&quot;, n_clicks=0),
    html.Div(id=&#39;dynamic-dropdown-container-div&#39;, children=[]),
])

@callback(
    Output(&#39;dynamic-dropdown-container-div&#39;, &#39;children&#39;),
    Input(&#39;dynamic-add-filter-btn&#39;, &#39;n_clicks&#39;)
    )
def display_dropdowns(n_clicks):
    patched_children = Patch()

    new_element = html.Div([
        dcc.Dropdown(
            [&#39;NYC&#39;, &#39;MTL&#39;, &#39;LA&#39;, &#39;TOKYO&#39;],
            id={
                &#39;type&#39;: &#39;city-dynamic-dropdown&#39;,
                &#39;index&#39;: n_clicks
            }
        ),
        html.Div(
            id={
                &#39;type&#39;: &#39;city-dynamic-output&#39;,
                &#39;index&#39;: n_clicks
            }
        )
    ])
    patched_children.append(new_element)
    return patched_children


@callback(
    Output({&#39;type&#39;: &#39;city-dynamic-output&#39;, &#39;index&#39;: MATCH}, &#39;children&#39;),
    Input({&#39;type&#39;: &#39;city-dynamic-dropdown&#39;, &#39;index&#39;: MATCH}, &#39;value&#39;),
    State({&#39;type&#39;: &#39;city-dynamic-dropdown&#39;, &#39;index&#39;: MATCH}, &#39;id&#39;),
)
def display_output(value, id):
    return html.Div(f&quot;Dropdown {id[&#39;index&#39;]} = {value}&quot;)


if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</pre></div>
</div>
<p>Add Filter</p>
<p>Select…</p>
<p>Dropdown 0 = None</p>
<p>Notes about this example:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">display_dropdowns</span></code> callback returns two elements with the <em>same</em> <code class="docutils literal notranslate"><span class="pre">index</span></code>: a dropdown and a div.</p></li>
<li><p>The second callback uses the <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> selector. With this selector, we’re asking Dash to:</p>
<ol class="arabic simple">
<li><p>Fire the callback whenever the <code class="docutils literal notranslate"><span class="pre">value</span></code> property of any component with the id <code class="docutils literal notranslate"><span class="pre">'type':</span> <span class="pre">'dynamic-dropdown'</span></code> changes: <code class="docutils literal notranslate"><span class="pre">Input({'type':</span> <span class="pre">'dynamic-dropdown',</span> <span class="pre">'index':</span> <span class="pre">MATCH},</span> <span class="pre">'value')</span></code></p></li>
<li><p>Update the component with the id <code class="docutils literal notranslate"><span class="pre">'type':</span> <span class="pre">'dynamic-output'</span></code> and the <code class="docutils literal notranslate"><span class="pre">index</span></code> that <em>matches</em> the same <code class="docutils literal notranslate"><span class="pre">index</span></code> of the input: <code class="docutils literal notranslate"><span class="pre">Output({'type':</span> <span class="pre">'dynamic-output',</span> <span class="pre">'index':</span> <span class="pre">MATCH},</span> <span class="pre">'children')</span></code></p></li>
<li><p>Pass along the <code class="docutils literal notranslate"><span class="pre">id</span></code> of the dropdown into the callback: <code class="docutils literal notranslate"><span class="pre">State({'type':</span> <span class="pre">'dynamic-dropdown',</span> <span class="pre">'index':</span> <span class="pre">MATCH},</span> <span class="pre">'id')</span></code></p></li>
</ol>
</li>
<li><p>With the <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> selector, only a <em>single</em> value is passed into the callback for each <code class="docutils literal notranslate"><span class="pre">Input</span></code> or <code class="docutils literal notranslate"><span class="pre">State</span></code>. This is unlike the previous example with the <code class="docutils literal notranslate"><span class="pre">ALL</span></code> selector where Dash passed <em>all</em> of the values into the callback.</p></li>
<li><p>Notice how it’s important to design IDs dictionaries that “line up” the inputs with outputs. The <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> contract is that Dash will update whichever output has the same dynamic ID as the id. In this case, the “dynamic ID” is the value of the <code class="docutils literal notranslate"><span class="pre">index</span></code> and we’ve designed our layout to return dropdowns &amp; divs with identical values of <code class="docutils literal notranslate"><span class="pre">index</span></code>.</p></li>
<li><p>In some cases, it may be important to know <em>which</em> dynamic component changed. As above, you can access this by setting <code class="docutils literal notranslate"><span class="pre">id</span></code> as <code class="docutils literal notranslate"><span class="pre">State</span></code> in the callback.</p></li>
<li><p>You can also use <code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code> to access the inputs and state and to know which input changed. <code class="docutils literal notranslate"><span class="pre">outputs_list</span></code> is particularly useful with <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> because it can tell you <em>which</em> dynamic component this particular invocation of the callback is responsible for updating. Here is what that data might look like with two dropdowns rendered on the page after we change the first dropdown.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.triggered_prop_ids</span></code> (available from Dash 2.4) returns a dictionary of inputs that triggered the callback. Each key is a <code class="docutils literal notranslate"><span class="pre">&lt;component_id&gt;.&lt;component_property&gt;</span></code> and the corresponding value is the <code class="docutils literal notranslate"><span class="pre">&lt;component_id&gt;</span></code>. In this example, we can see that the id of the component that triggered the callback was <code class="docutils literal notranslate"><span class="pre">{'index':</span> <span class="pre">0,</span> <span class="pre">'type':</span> <span class="pre">'dynamic-dropdown'}</span></code>and the property was <code class="docutils literal notranslate"><span class="pre">value</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      {
&#39;{&quot;index&quot;:0,&quot;type&quot;:&quot;dynamic-dropdown&quot;}.value&#39;: {
    &quot;index&quot;: 0,
    &quot;type&quot;: &quot;dynamic-dropdown&quot;,
}
</pre></div>
</div>
<p>}</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.triggered</span></code>. Note that the <code class="docutils literal notranslate"><span class="pre">prop_id</span></code> is a stringified dictionary with no whitespace.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      [
{
  &#39;prop_id&#39;: &#39;{&quot;index&quot;:0,&quot;type&quot;:&quot;dynamic-dropdown&quot;}.value&#39;,
  &#39;value&#39;: &#39;NYC&#39;
}
</pre></div>
</div>
<p>]</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.inputs</span></code>. Note that the key is a stringified dictionary with no whitespace.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      {
&#39;{&quot;index&quot;:0,&quot;type&quot;:&quot;dynamic-dropdown&quot;}.value&#39;: &#39;NYC&#39;
</pre></div>
</div>
<p>}</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.inputs_list</span></code>. Each element of the list corresponds to one of the input declarations. If one of the input declarations matches a pattern then it will contain a list of values.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      [
[
  {
    &#39;id&#39;: {
      &#39;index&#39;: 0,
      &#39;type&#39;: &#39;dynamic-dropdown&#39;
    },
    &#39;property&#39;: &#39;value&#39;,
    &#39;value&#39;: &#39;NYC&#39;
  }
]
</pre></div>
</div>
<p>]</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.outputs_list</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      {
&#39;id&#39;: {
    &#39;index&#39;: 0,
    &#39;type&#39;: dynamic-output&#39;
},
&#39;property&#39;: &#39;children&#39;
</pre></div>
</div>
<p>}</p>
</li>
</ul>
</li>
</ul>
<p>Simple <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> Example Without Partial Updates</p>
<p>__</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> from dash import Dash, dcc, html, Input, Output, State, MATCH, callback

app = Dash(__name__, suppress_callback_exceptions=True)

app.layout = html.Div([
    html.Button(&#39;Add Filter&#39;, id=&#39;dynamic-add-filter&#39;, n_clicks=0),
    html.Div(id=&#39;dynamic-dropdown-container&#39;, children=[]),
])

@callback(
    Output(&#39;dynamic-dropdown-container&#39;, &#39;children&#39;),
    Input(&#39;dynamic-add-filter&#39;, &#39;n_clicks&#39;),
    State(&#39;dynamic-dropdown-container&#39;, &#39;children&#39;))
def display_dropdowns(n_clicks, children):
    new_element = html.Div([
        dcc.Dropdown(
            [&#39;NYC&#39;, &#39;MTL&#39;, &#39;LA&#39;, &#39;TOKYO&#39;],
            id={
                &#39;type&#39;: &#39;dynamic-dropdown&#39;,
                &#39;index&#39;: n_clicks
            }
        ),
        html.Div(
            id={
                &#39;type&#39;: &#39;dynamic-output&#39;,
                &#39;index&#39;: n_clicks
            }
        )
    ])
    children.append(new_element)
    return children


@callback(
    Output({&#39;type&#39;: &#39;dynamic-output&#39;, &#39;index&#39;: MATCH}, &#39;children&#39;),
    Input({&#39;type&#39;: &#39;dynamic-dropdown&#39;, &#39;index&#39;: MATCH}, &#39;value&#39;),
    State({&#39;type&#39;: &#39;dynamic-dropdown&#39;, &#39;index&#39;: MATCH}, &#39;id&#39;),
)
def display_output(value, id):
    return html.Div(&#39;Dropdown {} = {}&#39;.format(id[&#39;index&#39;], value))


if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</pre></div>
</div>
</section>
<section id="simple-example-with-allsmaller">
<h2>Simple Example with <code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code><a class="headerlink" href="#simple-example-with-allsmaller" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>This example uses <span class="xref myst">partial property updates</span>,
introduced in Dash 2.9. For an example that works with earlier versions of
Dash, see Simple <code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code> Example Without Partial Updates at the end of
this example.</p>
</div></blockquote>
<p>In the following example, <code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code> is used to pass in the values of all of
the dropdowns on the page that have an index smaller than the index
corresponding to the div.</p>
<p>The user interface in the example below displays filter results that are
increasingly specific in each as we apply each additional dropdown.</p>
<p><code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code> can only be used in <code class="docutils literal notranslate"><span class="pre">Input</span></code> and <code class="docutils literal notranslate"><span class="pre">State</span></code> items, and must be used
on a key that has <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> in the <code class="docutils literal notranslate"><span class="pre">Output</span></code> item(s).</p>
<p><code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code> it isn’t always necessary (you can usually use <code class="docutils literal notranslate"><span class="pre">ALL</span></code> and filter
out the indices in your callback) but it will make your logic simpler.</p>
<p>__</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> from dash import Dash, dcc, html, Input, Output, Patch, MATCH, ALLSMALLER, callback
import pandas as pd

df = pd.read_csv(&#39;https://raw.githubusercontent.com/plotly/datasets/master/gapminder2007.csv&#39;)

app = Dash(__name__, suppress_callback_exceptions=True)

app.layout = html.Div([
    html.Button(&#39;Add Filter&#39;, id=&#39;add-filter-ex3-btn&#39;, n_clicks=0),
    html.Div(id=&#39;container-ex3-div&#39;, children=[]),
])

@callback(
    Output(&#39;container-ex3-div&#39;, &#39;children&#39;),
    Input(&#39;add-filter-ex3-btn&#39;, &#39;n_clicks&#39;))
def display_dropdowns(n_clicks):
    patched_children = Patch()
    patched_children.append(html.Div([
        dcc.Dropdown(
            df[&#39;country&#39;].unique(),
            df[&#39;country&#39;].unique()[n_clicks],
            id={
                &#39;type&#39;: &#39;filter-dd-ex3&#39;,
                &#39;index&#39;: n_clicks
            }
        ),
        html.Div(id={
            &#39;type&#39;: &#39;output-div-ex3&#39;,
            &#39;index&#39;: n_clicks
        })
    ]))
    return patched_children


@callback(
    Output({&#39;type&#39;: &#39;output-div-ex3&#39;, &#39;index&#39;: MATCH}, &#39;children&#39;),
    Input({&#39;type&#39;: &#39;filter-dd-ex3&#39;, &#39;index&#39;: MATCH}, &#39;value&#39;),
    Input({&#39;type&#39;: &#39;filter-dd-ex3&#39;, &#39;index&#39;: ALLSMALLER}, &#39;value&#39;),
)
def display_output(matching_value, previous_values):
    previous_values_in_reversed_order = previous_values[::-1]
    all_values = [matching_value] + previous_values_in_reversed_order

    dff = df[df[&#39;country&#39;].str.contains(&#39;|&#39;.join(all_values))]
    avgLifeExp = dff[&#39;lifeExp&#39;].mean()

    # Return a slightly different string depending on number of values
    if len(all_values) == 1:
        return html.Div(&#39;{:.2f} is the life expectancy of {}&#39;.format(
            avgLifeExp, matching_value
        ))
    elif len(all_values) == 2:
        return html.Div(&#39;{:.2f} is the average life expectancy of {}&#39;.format(
            avgLifeExp, &#39; and &#39;.join(all_values)
        ))
    else:
        return html.Div(&#39;{:.2f} is the average life expectancy of {}, and {}&#39;.format(
            avgLifeExp, &#39;, &#39;.join(all_values[:-1]), all_values[-1]
        ))

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</pre></div>
</div>
<p>Add Filter</p>
<p>Afghanistan</p>
<p>×</p>
<p>43.83 is the life expectancy of Afghanistan</p>
<ul>
<li><p>In the example above, try adding a few filters and then change the first dropdown. Notice how changing this dropdown will update the text of each <code class="docutils literal notranslate"><span class="pre">html.Div</span></code> that has an index that depends on that dropdown.</p></li>
<li><p>That is, each <code class="docutils literal notranslate"><span class="pre">html.Div</span></code> will get updated whenever any of the dropdowns with an <code class="docutils literal notranslate"><span class="pre">index</span></code> smaller than it has changed.</p></li>
<li><p>So, if there are 10 filters added and the first dropdown has changed, Dash will fire your callback 10 times, once to update each <code class="docutils literal notranslate"><span class="pre">html.Div</span></code> that depends on the <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> that changed.</p></li>
<li><p>As above, you can also use <code class="docutils literal notranslate"><span class="pre">dash.callback_context</span></code> to access the inputs and state and to know which input changed. Here is what that data might look like when updating the second div with two dropdowns rendered on the page after we change the first dropdown.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.triggered_prop_ids</span></code> (available from Dash 2.4) returns a dictionary of inputs that triggered the callback. Each key is a <code class="docutils literal notranslate"><span class="pre">&lt;component_id&gt;.&lt;component_property&gt;</span></code> and the corresponding value is the <code class="docutils literal notranslate"><span class="pre">&lt;component_id&gt;</span></code>. In this example, we can see that the id of the component that triggered the callback was <code class="docutils literal notranslate"><span class="pre">{'index':</span> <span class="pre">0,</span> <span class="pre">'type':</span> <span class="pre">'filter-dropdown-ex3'}</span></code>and the property was <code class="docutils literal notranslate"><span class="pre">value</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      {
&#39;{&quot;index&quot;:0,&quot;type&quot;:&quot;filter-dropdown-ex3&quot;}.value&#39;: {
    &quot;index&quot;: 0,
    &quot;type&quot;: &quot;filter-dropdown-ex3&quot;,
}
</pre></div>
</div>
<p>}</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.triggered</span></code>. Note that the <code class="docutils literal notranslate"><span class="pre">prop_id</span></code> is a stringified dictionary with no whitespace.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      [
{
  &#39;prop_id&#39;: &#39;{&quot;index&quot;:0,&quot;type&quot;:&quot;filter-dropdown-ex3&quot;}.value&#39;,
  &#39;value&#39;: &#39;Canada&#39;
}
</pre></div>
</div>
<p>]</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.inputs</span></code>. Note that the key is a stringified dictionary with no whitespace.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      {
</pre></div>
</div>
<p>‘{“index”:1,”type”:”filter-dropdown-ex3”}.value’: ‘Albania’,
‘{“index”:0,”type”:”filter-dropdown-ex3”}.value’: ‘Canada’
}</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.inputs_list</span></code>. Each element of the list corresponds to one of the input declarations. If one of the input declarations matches a pattern then it will contain a list of values.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      [
{
  &#39;id&#39;: {
    &#39;index&#39;: 1,
    &#39;type&#39;: &#39;filter-dropdown-ex3&#39;
  },
  &#39;property&#39;: &#39;value&#39;,
  &#39;value&#39;: &#39;Albania&#39;
},
[
  {
    &#39;id&#39;: {
      &#39;index&#39;: 0,
      &#39;type&#39;: &#39;filter-dropdown-ex3&#39;
    },
    &#39;property&#39;: &#39;value&#39;,
    &#39;value&#39;: &#39;Canada&#39;
  }
]
</pre></div>
</div>
<p>]</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dash.callback_context.outputs_list</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      {
&#39;id&#39;: {
    &#39;index&#39;: 1,
    &#39;type&#39;: output-ex3&#39;
},
&#39;property&#39;: &#39;children&#39;
</pre></div>
</div>
<p>}</p>
</li>
</ul>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code> Example Without Partial Updates</p>
<p>__</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> from dash import Dash, dcc, html, Input, Output, State, MATCH, ALLSMALLER, callback
import pandas as pd

df = pd.read_csv(&#39;https://raw.githubusercontent.com/plotly/datasets/master/gapminder2007.csv&#39;)

app = Dash(__name__, suppress_callback_exceptions=True)

app.layout = html.Div([
    html.Button(&#39;Add Filter&#39;, id=&#39;add-filter-ex3&#39;, n_clicks=0),
    html.Div(id=&#39;container-ex3&#39;, children=[]),
])

@callback(
    Output(&#39;container-ex3&#39;, &#39;children&#39;),
    Input(&#39;add-filter-ex3&#39;, &#39;n_clicks&#39;),
    State(&#39;container-ex3&#39;, &#39;children&#39;))
def display_dropdowns(n_clicks, existing_children):
    existing_children.append(html.Div([
        dcc.Dropdown(
            df[&#39;country&#39;].unique(),
            df[&#39;country&#39;].unique()[n_clicks],
            id={
                &#39;type&#39;: &#39;filter-dropdown-ex3&#39;,
                &#39;index&#39;: n_clicks
            }
        ),
        html.Div(id={
            &#39;type&#39;: &#39;output-ex3&#39;,
            &#39;index&#39;: n_clicks
        })
    ]))
    return existing_children


@callback(
    Output({&#39;type&#39;: &#39;output-ex3&#39;, &#39;index&#39;: MATCH}, &#39;children&#39;),
    Input({&#39;type&#39;: &#39;filter-dropdown-ex3&#39;, &#39;index&#39;: MATCH}, &#39;value&#39;),
    Input({&#39;type&#39;: &#39;filter-dropdown-ex3&#39;, &#39;index&#39;: ALLSMALLER}, &#39;value&#39;),
)
def display_output(matching_value, previous_values):
    previous_values_in_reversed_order = previous_values[::-1]
    all_values = [matching_value] + previous_values_in_reversed_order

    dff = df[df[&#39;country&#39;].str.contains(&#39;|&#39;.join(all_values))]
    avgLifeExp = dff[&#39;lifeExp&#39;].mean()

    # Return a slightly different string depending on number of values
    if len(all_values) == 1:
        return html.Div(&#39;{:.2f} is the life expectancy of {}&#39;.format(
            avgLifeExp, matching_value
        ))
    elif len(all_values) == 2:
        return html.Div(&#39;{:.2f} is the average life expectancy of {}&#39;.format(
            avgLifeExp, &#39; and &#39;.join(all_values)
        ))
    else:
        return html.Div(&#39;{:.2f} is the average life expectancy of {}, and {}&#39;.format(
            avgLifeExp, &#39;, &#39;.join(all_values[:-1]), all_values[-1]
        ))

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</pre></div>
</div>
</section>
<section id="todo-app">
<h2>Todo App<a class="headerlink" href="#todo-app" title="Permalink to this heading">#</a></h2>
<p>Creating a Todo App is a classic UI exercise in that demonstrates many
features in common “create, read, update and delete” (CRUD) applications.</p>
<blockquote>
<div><p>This example uses partial property updates and duplicate callback outputs,
introduced in Dash 2.9. For an example that works with earlier versions of
Dash, see Todo App Without Partial Updates below.</p>
</div></blockquote>
<p>__</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> from dash import Dash, dcc, html, Input, Output, State, MATCH, ALL, Patch, callback

app = Dash(__name__)

app.layout = html.Div(
    [
        html.Div(&quot;Dash To-Do list&quot;),
        dcc.Input(id=&quot;new-item-input&quot;),
        html.Button(&quot;Add&quot;, id=&quot;add-btn&quot;),
        html.Button(&quot;Clear Done&quot;, id=&quot;clear-done-btn&quot;),
        html.Div(id=&quot;list-container-div&quot;),
        html.Div(id=&quot;totals-div&quot;),
    ]
)

# Callback to add new item to list
@callback(
    Output(&quot;list-container-div&quot;, &quot;children&quot;, allow_duplicate=True),
    Output(&quot;new-item-input&quot;, &quot;value&quot;),
    Input(&quot;add-btn&quot;, &quot;n_clicks&quot;),
    State(&quot;new-item-input&quot;, &quot;value&quot;),
    prevent_initial_call=True,
)
def add_item(button_clicked, value):
    patched_list = Patch()

    def new_checklist_item():
        return html.Div(
            [
                dcc.Checklist(
                    options=[{&quot;label&quot;: &quot;&quot;, &quot;value&quot;: &quot;done&quot;}],
                    id={&quot;index&quot;: button_clicked, &quot;type&quot;: &quot;done&quot;},
                    style={&quot;display&quot;: &quot;inline&quot;},
                    labelStyle={&quot;display&quot;: &quot;inline&quot;},
                ),
                html.Div(
                    [value],
                    id={&quot;index&quot;: button_clicked, &quot;type&quot;: &quot;output-str&quot;},
                    style={&quot;display&quot;: &quot;inline&quot;, &quot;margin&quot;: &quot;10px&quot;},
                ),
            ]
        )

    patched_list.append(new_checklist_item())
    return patched_list, &quot;&quot;


# Callback to update item styling
@callback(
    Output({&quot;index&quot;: MATCH, &quot;type&quot;: &quot;output-str&quot;}, &quot;style&quot;),
    Input({&quot;index&quot;: MATCH, &quot;type&quot;: &quot;done&quot;}, &quot;value&quot;),
    prevent_initial_call=True,
)
def item_selected(input):
    if not input:
        style = {&quot;display&quot;: &quot;inline&quot;, &quot;margin&quot;: &quot;10px&quot;}
    else:
        style = {
            &quot;display&quot;: &quot;inline&quot;,
            &quot;margin&quot;: &quot;10px&quot;,
            &quot;textDecoration&quot;: &quot;line-through&quot;,
            &quot;color&quot;: &quot;#888&quot;,
        }
    return style


# Callback to delete items marked as done
@callback(
    Output(&quot;list-container-div&quot;, &quot;children&quot;, allow_duplicate=True),
    Input(&quot;clear-done-btn&quot;, &quot;n_clicks&quot;),
    State({&quot;index&quot;: ALL, &quot;type&quot;: &quot;done&quot;}, &quot;value&quot;),
    prevent_initial_call=True,
)
def delete_items(n_clicks, state):
    patched_list = Patch()
    values_to_remove = []
    for i, val in enumerate(state):
        if val:
            values_to_remove.insert(0, i)
    for v in values_to_remove:
        del patched_list[v]
    return patched_list


# Callback to update totals
@callback(
    Output(&quot;totals-div&quot;, &quot;children&quot;), Input({&quot;index&quot;: ALL, &quot;type&quot;: &quot;done&quot;}, &quot;value&quot;)
)
def show_totals(done):
    count_all = len(done)
    count_done = len([d for d in done if d])
    result = f&quot;{count_done} of {count_all} items completed&quot;
    if count_all:
        result += f&quot; - {int(100 * count_done / count_all)}%&quot;
    return result


if __name__ == &quot;__main__&quot;:
    app.run(debug=True)
</pre></div>
</div>
<p>Dash To-Do list</p>
<p>AddClear Done</p>
<p>0 of 0 items completed</p>
<p>Todo App Without Partial Updates</p>
<p>__</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> from dash import Dash, html, dcc, Input, Output, State, MATCH, ALL, ctx, callback

app = Dash(__name__)

app.layout = html.Div([
    html.Div(&#39;Dash To-Do list&#39;),
    dcc.Input(id=&quot;new-item&quot;),
    html.Button(&quot;Add&quot;, id=&quot;add&quot;),
    html.Button(&quot;Clear Done&quot;, id=&quot;clear-done&quot;),
    html.Div(id=&quot;list-container&quot;),
    html.Div(id=&quot;totals&quot;)
])

style_todo = {&quot;display&quot;: &quot;inline&quot;, &quot;margin&quot;: &quot;10px&quot;}
style_done = {&quot;textDecoration&quot;: &quot;line-through&quot;, &quot;color&quot;: &quot;#888&quot;}
style_done.update(style_todo)


@callback(
    [
        Output(&quot;list-container&quot;, &quot;children&quot;),
        Output(&quot;new-item&quot;, &quot;value&quot;)
    ],
    [
        Input(&quot;add&quot;, &quot;n_clicks&quot;),
        Input(&quot;new-item&quot;, &quot;n_submit&quot;),
        Input(&quot;clear-done&quot;, &quot;n_clicks&quot;)
    ],
    [
        State(&quot;new-item&quot;, &quot;value&quot;),
        State({&quot;index&quot;: ALL}, &quot;children&quot;),
        State({&quot;index&quot;: ALL, &quot;type&quot;: &quot;done&quot;}, &quot;value&quot;)
    ]
)
def edit_list(add, add2, clear, new_item, items, items_done):
    triggered = [t[&quot;prop_id&quot;] for t in ctx.triggered]
    adding = len([1 for i in triggered if i in (&quot;add.n_clicks&quot;, &quot;new-item.n_submit&quot;)])
    clearing = len([1 for i in triggered if i == &quot;clear-done.n_clicks&quot;])
    new_spec = [
        (text, done) for text, done in zip(items, items_done)
        if not (clearing and done)
    ]
    if adding:
        new_spec.append((new_item, []))
    new_list = [
        html.Div([
            dcc.Checklist(
                id={&quot;index&quot;: i, &quot;type&quot;: &quot;done&quot;},
                options=[{&quot;label&quot;: &quot;&quot;, &quot;value&quot;: &quot;done&quot;}],
                value=done,
                style={&quot;display&quot;: &quot;inline&quot;},
                labelStyle={&quot;display&quot;: &quot;inline&quot;}
            ),
            html.Div(text, id={&quot;index&quot;: i}, style=style_done if done else style_todo)
        ], style={&quot;clear&quot;: &quot;both&quot;})
        for i, (text, done) in enumerate(new_spec)
    ]
    return [new_list, &quot;&quot; if adding else new_item]


@callback(
    Output({&quot;index&quot;: MATCH}, &quot;style&quot;),
    Input({&quot;index&quot;: MATCH, &quot;type&quot;: &quot;done&quot;}, &quot;value&quot;)
)
def mark_done(done):
    return style_done if done else style_todo


@callback(
    Output(&quot;totals&quot;, &quot;children&quot;),
    Input({&quot;index&quot;: ALL, &quot;type&quot;: &quot;done&quot;}, &quot;value&quot;)
)
def show_totals(done):
    count_all = len(done)
    count_done = len([d for d in done if d])
    result = &quot;{} of {} items completed&quot;.format(count_done, count_all)
    if count_all:
        result += &quot; - {}%&quot;.format(int(100 * count_done / count_all))
    return result


if __name__ == &quot;__main__&quot;:
    app.run(debug=True)
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/2回调函数"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="2.1%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%9E%E8%B0%83.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"> Clientside Callbacks</p>
      </div>
    </a>
    <a class="right-next"
       href="2.3%E9%83%A8%E5%88%86%E5%B1%9E%E6%80%A7%E6%9B%B4%E6%96%B0.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"> Partial Property Updates</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-example-with-all">Simple Example with <code class="docutils literal notranslate"><span class="pre">ALL</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-example-with-match">Simple Example with <code class="docutils literal notranslate"><span class="pre">MATCH</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-example-with-allsmaller">Simple Example with <code class="docutils literal notranslate"><span class="pre">ALLSMALLER</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#todo-app">Todo App</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By hutalk Community
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>